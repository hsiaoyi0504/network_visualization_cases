<html>
  <head>
    <title><%= title %></title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheey" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.11/css/dataTables.bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.11/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.11/js/dataTables.bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/2.6.8/cytoscape.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
        <table id="proteinTable" class="table table-striped table-bordered"></table>
      </div>
      <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
        <div id="cy"></div>
      </div>
      <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2" id="control">
          <div id="nodeNumInputDiv">
            <div class="form-group">
              <label id="nodeNumInputLabel" for="nodeNumInput">Type in the number of nodes:</label>
              <input id="nodeNumInput" type="number" class="form-control"></input>
              <button id="nodeNumUpdateButton" class="btn btn-primary">update</button>
            </div>
          </div>
      </div>
    </div>
    <script type="text/javascript">
      var elements = <%- JSON.stringify(elements) %>;
      var cy = cytoscape({
            container: document.getElementById('cy'), // container to render in
            elements: elements, //list of graph elements to start with
            style: [ // the stylesheet for the graph
                {
                  selector: 'node',
                  style: {
                    'background-color': '#666',
                    'label': 'data(id)'
                  }
                },
                {
                  selector: 'edge',
                  style: {
                    'curve-style': 'haystack',
                    'width': 3,
                    'line-color': '#ccc',
                    'target-arrow-color': '#ccc',
                    'target-arrow-shape': 'triangle'
                  }
                }
            ],
            layout: {
                name: 'grid',
                rows: 30
            }
        });
        var collectionAll = cy.elements();
        var collection = cy.elements("node[weight > 0]");
        document.getElementById('nodeNumInputLabel').innerHTML = document.getElementById('nodeNumInputLabel').innerHTML + '(Maximum:' + cy.elements("node[weight > 0]").size() +')';
        cy.elements("node[weight > 50]").remove();
        var currentNodeNum = cy.elements("node[weight > 0]").size();
        document.getElementById('nodeNumInput').value = cy.elements("node[weight > 0]").size();
        cy.layout({name: 'cose'});
        cy.fit();
        // var dataSet2=[];
        // for(i=0;i<elements.length;i++){
        //   if(typeof elements[i].data.source==='undefined'){
        //     dataSet2.push(elements[i].data.id);
        //   }else{
        //     break;
        //   }
        // }
        console.log(dataSet2);
        var dataSet = [
            [ "Tiger Nixon", "System Architect"],
            [ "Garrett Winters", "Accountant"],
            [ "Ashton Cox", "Junior Technical Author"],
            [ "Cedric Kelly", "Senior Javascript Developer"],
            [ "Airi Satou", "Accountant"],
            [ "Brielle Williamson", "Integration Specialist"],
            [ "Herrod Chandler", "Sales Assistant"],
            [ "Rhona Davidson", "Integration Specialist"],
            [ "Colleen Hurst", "Javascript Developer"],
            [ "Sonya Frost", "Software Engineer"],
            [ "Jena Gaines", "Office Manager"],
            [ "Quinn Flynn", "Support Lead"],
            [ "Charde Marshall", "Regional Director"],
            [ "Haley Kennedy", "Senior Marketing Designer"],
            [ "Tatyana Fitzpatrick", "Regional Director"],
            [ "Michael Silva", "Marketing Designer"],
            [ "Paul Byrd", "Chief Financial Officer (CFO)"]
        ];
         
        $(document).ready(function() {
            $('#proteinTable').DataTable( {
                data: dataSet,
                columns: [
                    { title: "Short Name" },
                    { title: "Full Name" },
                ]
            } );
        } );
        document.getElementById('nodeNumUpdateButton').onclick = function(){
          if( document.getElementById('nodeNumInput').value != currentNodeNum ){
            collectionAll.restore();
            var collectionRemove = cy.elements("node[weight >" +document.getElementById('nodeNumInput').value+"]");
            collectionRemove.remove();
            currentNodeNum = document.getElementById('nodeNumInput').value;
            cy.layout({name: 'cose'});
            cy.fit();
          }
        }
    </script>
  </body>
</html>